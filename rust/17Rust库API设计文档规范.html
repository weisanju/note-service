<!DOCTYPE HTML>
<html lang="zh_CN" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ruståº“APIè®¾è®¡æ–‡æ¡£è§„èŒƒ.md - RUSTå­¦ä¹ ç¬”è®°</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="10rustæŒ‡é’ˆ.html"><strong aria-hidden="true">0.</strong> rustæŒ‡é’ˆ.md</a></li><li class="chapter-item "><a href="11æ¨¡å¼åŒ¹é….html"><strong aria-hidden="true">1.</strong> æ¨¡å¼åŒ¹é….md</a></li><li class="chapter-item "><a href="12ConstantsAndVariables.html"><strong aria-hidden="true">2.</strong> ConstantsAndVariables.md</a></li><li class="chapter-item "><a href="13newTypeæ¨¡å¼.html"><strong aria-hidden="true">3.</strong> newTypeæ¨¡å¼.md</a></li><li class="chapter-item "><a href="14Rustä¸­çš„Sizedness.html"><strong aria-hidden="true">4.</strong> Rustä¸­çš„Sizedness.md</a></li><li class="chapter-item "><a href="15ä¾èµ–ç®¡ç†.html"><strong aria-hidden="true">5.</strong> ä¾èµ–ç®¡ç†.md</a></li><li class="chapter-item "><a href="16constç±»å‹ä¸å‡½æ•°.html"><strong aria-hidden="true">6.</strong> constç±»å‹ä¸å‡½æ•°.md</a></li><li class="chapter-item expanded "><a href="17Ruståº“APIè®¾è®¡æ–‡æ¡£è§„èŒƒ.html" class="active"><strong aria-hidden="true">7.</strong> Ruståº“APIè®¾è®¡æ–‡æ¡£è§„èŒƒ.md</a></li><li class="chapter-item "><a href="18rustæ‰§è¡Œshellå‘½ä»¤.html"><strong aria-hidden="true">8.</strong> rustæ‰§è¡Œshellå‘½ä»¤.md</a></li><li class="chapter-item "><a href="1å¸¸è§ç¼–ç¨‹æ¦‚å¿µ.html"><strong aria-hidden="true">9.</strong> å¸¸è§ç¼–ç¨‹æ¦‚å¿µ.md</a></li><li class="chapter-item "><a href="2æ‰€æœ‰æƒ.html"><strong aria-hidden="true">10.</strong> æ‰€æœ‰æƒ.md</a></li><li class="chapter-item "><a href="3å¸¸è§é›†åˆ.html"><strong aria-hidden="true">11.</strong> å¸¸è§é›†åˆ.md</a></li><li class="chapter-item "><a href="4è¿­ä»£ä¸é—­åŒ….html"><strong aria-hidden="true">12.</strong> è¿­ä»£ä¸é—­åŒ….md</a></li><li class="chapter-item "><a href="5æ³›å‹ä¸trait.html"><strong aria-hidden="true">13.</strong> æ³›å‹ä¸trait.md</a></li><li class="chapter-item "><a href="6å‡½æ•°å¼ç¼–ç¨‹.html"><strong aria-hidden="true">14.</strong> å‡½æ•°å¼ç¼–ç¨‹.md</a></li><li class="chapter-item "><a href="7Rustæ•°æ®ç±»å‹.html"><strong aria-hidden="true">15.</strong> Rustæ•°æ®ç±»å‹.md</a></li><li class="chapter-item "><a href="7å®.html"><strong aria-hidden="true">16.</strong> å®.md</a></li><li class="chapter-item "><a href="8ç»“æ„ä½“.html"><strong aria-hidden="true">17.</strong> ç»“æ„ä½“.md</a></li><li class="chapter-item "><a href="9rusté¢å‘å¯¹è±¡ç‰¹æ€§.html"><strong aria-hidden="true">18.</strong> rusté¢å‘å¯¹è±¡ç‰¹æ€§.md</a></li><li class="chapter-item "><a href="rfcs.html"><strong aria-hidden="true">19.</strong> rfcs</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="rfcs/0195-associated-items.html"><strong aria-hidden="true">19.0.</strong> -associated-items.md</a></li><li class="chapter-item "><a href="rfcs/0911-const-fn.html"><strong aria-hidden="true">19.1.</strong> -const-fn.md</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">RUSTå­¦ä¹ ç¬”è®°</h1>

                    <div class="right-buttons">

                    </div>
                </div>


                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="/note-service/rust/infisearch_assets/search-ui-light.css">
<style>.light .infi-root,
.rust .infi-root,
.coal .infi-root,
.navy .infi-root,
.ayu .infi-root {
    --infi-shadow: none;
    --infi-border: 3px solid var(--table-header-bg);
    --infi-bg: var(--bg);
    --infi-triangle-bg: var(--table-header-bg);
    --infi-item-box-shadow: 0 1px 5px rgba(196, 192, 187, 0.8);
    --infi-title-fg: var(--fg);
    --infi-title-hover-fg: var(--fg);
    --infi-title-hover-bg: var(--table-header-bg);
    --infi-title-border-bottom-hover: 2px solid var(--table-header-bg);
    --infi-heading-fg: var(--fg);
    --infi-heading-hover-fg: var(--fg);
    --infi-body-fg: var(--fg);
    --infi-body-hover-fg: var(--fg);
    --infi-sub-bg: var(--bg);
    --infi-highlight: var(--search-mark-bg);
    --infi-highlight-bg: none;
    --infi-header-fg: var(--fg);
    --infi-checkbox-bg: #f8f8f8;
    --infi-checkbox-checked-bg: #fff;
    --infi-checkbox-border: #414141;
    --infi-filter-header-active: var(--infi-title-bg);
    --infi-error-fg: var(--fg);
    --infi-fine-print-fg: var(--fg);
    --infi-loading-bg: var(--fg);
    --infi-loading-secondary-bg: var(--fg);
    --infi-load-more-fg: var(--infi-title-fg);
    --infi-load-more-bg: var(--infi-title-bg);
    --infi-load-more-hover-fg: var(--infi-title-hover-fg);
    --infi-load-more-hover-bg: var(--infi-title-hover-bg);
    --infi-scrollbar-bg: none;
    --infi-scrollbar-thumb-bg: var(--sidebar-non-existant);
    --infi-fs-button-input-fg: var(--searchbar-shadow-color);
    --infi-fs-border: 3px solid var(--sidebar-bg);
    --infi-fs-box-shadow: none;
    --infi-fs-header-bg: var(--sidebar-bg);
    --infi-fs-header-box-shadow: none;
    --infi-tip-table-header-border: var(--table-border-color);
    --infi-tip-table-border: transparent;
    --infi-tip-table-alternate: var(--table-alternate-bg);
    --infi-tip-bg: var(--sidebar-bg);
    --infi-tip-fg: var(--sidebar-fg);
    --infi-tip-code-fg: var(--inline-code-color);
    --infi-tip-code-bg: transparent;
    --infi-tip-icon-bg: rgb(230, 230, 230);
    --infi-tip-icon-fg: rgb(80, 80, 80);
}

.light .infi-root {
    --infi-fs-header-close-fg: var(--searchresults-header-fg);
    --infi-fs-header-close-hover-fg: var(--fg);
}

.ayu .infi-root,
.rust .infi-root,
.coal .infi-root,
.navy .infi-root {
    --infi-fs-header-close-fg: var(--sidebar-fg);
    --infi-fs-header-close-hover-fg: white;
}

.ayu .infi-root,
.rust .infi-root {
    --infi-tip-code-fg: var(--search-mark-bg) !important;
    --infi-tip-icon-bg: rgb(200, 200, 200);
    --infi-tip-icon-fg: rgb(50, 50, 50);
}

.light .infi-root .infi-list-item.focus,
.rust .infi-root .infi-list-item.focus,
.coal .infi-root .infi-list-item.focus,
.navy .infi-root .infi-list-item.focus,
.ayu .infi-root .infi-list-item.focus {
    outline: 2px solid grey;
}

.light .infi-root,
.coal .infi-root,
.navy .infi-root,
.ayu .infi-root {
    --infi-title-bg: var(--theme-hover);
    --infi-sub-hover-bg: var(--table-alternate-bg);
    --infi-title-border-bottom: 2px solid var(--theme-hover);
}

.light .infi-root {
    --infi-highlight: #82a6c4;
    --infi-sub-hover-bg: #ebebeb;
}

.rust .infi-root {
    --infi-highlight: #bc8e6a;

    --infi-tip-table-alternate: var(--sidebar-bg);
    --infi-title-bg: var(--table-header-bg);
    --infi-title-border-bottom: 2px solid var(--table-header-bg);

    --infi-sub-hover-bg: #c6bbb1;
    --infi-title-bg: #bbada1;
    --infi-title-border-bottom: 2px solid #bbada1;
    --infi-title-hover-fg: #000;
    --infi-title-hover-bg: #a19488;
    --infi-title-border-bottom-hover: 2px solid #a19488;
    --infi-body-hover-fg: #1e1e1e;
    --infi-heading-hover-fg: #1e1e1e;
}

.coal .infi-root {
    --infi-highlight: #496c8a;
    --infi-sub-hover-bg: #272a2b;
}

.infi-theme .infi-root .infi-tip-item code,
.rust .infi-root .infi-tip-item code {
    color: var(--infi-tip-code-fg) !important;;
}

.coal .infi-root,
.navy .infi-root,
.ayu .infi-root {
    --infi-item-box-shadow: 0 1px 5px rgb(50, 50, 50);
    --infi-fs-input-fg: var(--fg);
    --infi-fs-input-focus-border: 2px solid #4f95cc;
    --infi-fs-input-focus-box-shadow: 0 0 5px -1px #63baff;
    --infi-key-fg: #fff;
    --infi-key-bg: #7d7d7d;
    --infi-checkbox-bg: #313233;
    --infi-checkbox-checked-bg: #424243;
    --infi-checkbox-border: #525354;
}

.rust .infi-root {
    --infi-fs-input-fg: var(--sidebar-fg);
    --infi-fs-input-bg: #29201d;
    --infi-fs-input-border: 2px solid #584d4a;
    --infi-fs-input-focus-border: 2px solid #4f95cc;
    --infi-fs-input-focus-box-shadow: 0 0 5px -1px #63baff;
}

.coal .infi-root {
    --infi-fs-input-bg: #1d1f21;
    --infi-fs-input-border: 2px solid #3e4144;
}

.navy .infi-root {
    --infi-fs-input-bg: #1e222f;
    --infi-fs-input-border: 2px solid #3d4252;
    --infi-sub-hover-bg: #242734;
}

.ayu .infi-root {
    --infi-fs-input-fg: var(--fg);
    --infi-fs-input-bg: #2b3035;
    --infi-fs-input-border: 2px solid #43474c;
    --infi-fs-input-focus-border: 2px solid #4f95cc;
    --infi-fs-input-focus-box-shadow: 0 0 5px -1px #63baff;
    --infi-sub-hover-bg: #282e35;
}

#infi-search {
    width: 100%;
    border-radius: 3px;
    box-sizing: border-box;
    padding: 10px 16px;
    border: 1px solid var(--searchbar-border-color);
    background: var(--searchbar-bg);
    color: var(--searchbar-fg);
}

#infi-search:focus:not(.infi-button-input) {
    box-shadow: 0 0 3px var(--searchbar-shadow-color);
}

#infi-search.infi-button-input {
    width: 100px;
}

#infi-search.infi-button-input::placeholder {
    position: relative;
    left: 14px;
}

#infi-search.infi-button-input:hover {
    transition: 0.3s ease-out;
    background: var(--infi-fs-button-input-bg) !important;
    outline: 2px solid var(--infi-fs-button-input-bg);
}

#infi-search.infi-button-input:hover::placeholder {
    color: var(--infi-fs-button-input-fg) !important;
}

@media print {
    #infi-search {
        display: none;
    }
}

#infisearch-mdbook-target {
    position: relative;
}

/*
 * For this plugin, don't show the controls until there is a query.
 */
#infisearch-mdbook-target.infi-empty-input > * {
    display: none;
}

.infi-root:not(.infi-fs-root) {
    display: block;
}

.light .infi-root .infi-title::after,
.rust .infi-root .infi-title::after,
.coal .infi-root .infi-title::after,
.navy .infi-root .infi-title::after,
.ayu .infi-root .infi-title::after {
    content: none;
    display: none;
}

.infi-header {
    padding-bottom: 9px;
}

.infi-load-more {
    padding: 7px 15px;
}
</style>
<p><input
    type="search"
    id="infi-search"
    placeholder="Search this book ..."
/></p>
<p><span style="font-weight: 600;"><!--preload weight 600--></span></p>
<div id="infisearch-mdbook-target"></div>
<h2 id="ä»€ä¹ˆæ˜¯ä¼˜é›…çš„-api"><a class="header" href="#ä»€ä¹ˆæ˜¯ä¼˜é›…çš„-api">ä»€ä¹ˆæ˜¯ä¼˜é›…çš„ API</a></h2>
<ul>
<li>
<p>æ–¹æ³•åæ¸…æ™°æ˜“æ‡‚ï¼Œä»¥è®©è°ƒç”¨äº†è¿™ä¸ª API çš„ä»£ç æ˜“äºé˜…è¯»ã€‚</p>
</li>
<li>
<p>æœ‰è§„å¾‹ã€å¯çŒœæµ‹çš„æ–¹æ³•ååœ¨ä½¿ç”¨ API æ—¶ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå¯ä»¥å‡å°‘é˜…è¯»æ–‡æ¡£çš„éœ€æ±‚ã€‚</p>
</li>
<li>
<p>æ¯ä¸ª API éƒ½æœ‰è‡³å°‘è¦æœ‰æ–‡æ¡£å’Œä¸€å°æ®µç¤ºä¾‹ä»£ç ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·å‡ ä¹ä¸éœ€è¦ç¼–å†™æ ·æ¿ä»£ç ï¼ˆboilerplate codeï¼‰æ¥ä½¿ç”¨è¿™ä¸ª APIï¼Œå› ä¸º</p>
<ul>
<li>å®ƒå¹¿æ³›æ¥å—å„ç§è¾“å…¥ç±»å‹ï¼ˆå½“ç„¶ç±»å‹è½¬æ¢æ˜¯æ˜¾å¼çš„ï¼‰</li>
<li>å¹¶ä¸”ä¹Ÿæœ‰è¶³ä»¥åº”ä»˜å¤§éƒ¨åˆ†å¸¸ç”¨æƒ…å†µçš„ä¸€é”® API</li>
</ul>
</li>
<li>
<p>å……åˆ†åˆ©ç”¨ç±»å‹æ¥é˜²æ­¢é€»è¾‘é”™è¯¯ï¼Œä½†ä¸ä¼šå¤ªå¦¨ç¢ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>è¿”å›æœ‰æ„ä¹‰çš„é”™è¯¯ï¼Œå¹¶ä¸”åœ¨æ–‡æ¡£ä¸­æ³¨æ˜ä¼šå¯¼è‡´ panic çš„æƒ…å†µã€‚</p>
</li>
</ul>
<h2 id="æŠ€æœ¯"><a class="header" href="#æŠ€æœ¯">æŠ€æœ¯</a></h2>
<blockquote>
<p>æœ‰ä¸€äº› Rust RFC æè¿°äº†æ ‡å‡†åº“çš„å‘½åæ–¹æ¡ˆã€‚ä½ ä¹Ÿåº”è¯¥éµå¾ªå®ƒä»¬ï¼Œä»¥è®©ç”¨æˆ·èƒ½è¿…é€Ÿä¸Šæ‰‹ä½¿ç”¨ä½ çš„åº“ã€‚</p>
</blockquote>
<ul>
<li>
<p>RFC 199 è§£é‡Šè¯´åº”è¯¥ä½¿ç”¨ mutã€move æˆ– ref ä½œä¸ºåç¼€ï¼Œæ¥æ ¹æ®å‚æ•°çš„å¯å˜æ€§åŒºåˆ†æ–¹æ³•ã€‚</p>
</li>
<li>
<p>RFC 344 å®šä¹‰äº†ä¸€äº›æœ‰æ„æ€çš„çº¦å®šï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å¦‚ä½•åœ¨æ–¹æ³•åç§°ä¸­å¼•ç”¨ç±»å‹åç§°ï¼ˆå¦‚ &amp;mut [T] å˜æˆ mut_sliceã€*mut T å˜æˆ mut ptrï¼‰ï¼Œ</li>
<li>å¦‚ä½•å‘½åè¿”å›è¿­ä»£å™¨çš„æ–¹æ³•ï¼Œ</li>
<li>getter æ–¹æ³•åº”è¯¥è¢«å‘½åä¸º field_name è€Œ setter æ–¹æ³•åº”è¯¥è¢«å‘½åä¸º set_field_nameï¼Œ</li>
<li>å¦‚ä½•å‘½å traitï¼šâ€œä¼˜å…ˆé€‰æ‹©ï¼ˆåŠç‰©ï¼‰åŠ¨è¯ã€åè¯ï¼Œç„¶åæ˜¯å½¢å®¹è¯ï¼›é¿å…è¯­æ³•åç¼€ï¼ˆå¦‚ ableï¼‰â€ï¼Œè€Œä¸”â€œå¦‚æœè¿™ä¸ª trait åªæœ‰ä¸€ä¸ªä¸»è¦æ–¹æ³•ï¼Œå¯ä»¥è€ƒè™‘ç”¨æ–¹æ³•åç§°æ¥å‘½å trait æœ¬èº«â€ï¼Œ</li>
</ul>
</li>
<li>
<p>RFC 430 æè¿°äº†ä¸€äº›é€šç”¨çš„å¤§å°å†™çº¦å®šï¼ˆæ€»ç»“ï¼šCamelCase ç”¨äºç±»å‹çº§åˆ«ï¼Œsnake_case ç”¨äºå˜é‡çº§åˆ«ï¼‰ã€‚</p>
</li>
<li>
<p>RFC 445 å¸Œæœ›ä½ ä¸ºæ‰©å±• traitï¼ˆextension traitï¼‰æ·»åŠ  Ext åç¼€ã€‚</p>
</li>
</ul>
<p>é™¤äº† RFC 199 å’Œ RFC 344 ï¼ˆè§ä¸Šï¼‰è§„å®šçš„ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å…³äºå¦‚ä½•é€‰æ‹©æ–¹æ³•åç§°çš„çº¦å®šï¼Œç›®å‰è¿˜æ²¡æœ‰åœ¨ RFC ä¸­æåŠã€‚è¿™äº›çº¦å®šå¤§éƒ¨åˆ†éƒ½åœ¨æ—§çš„ <a href="https://doc.rust-lang.org/1.12.0/style/style/naming/conversions.html">Rust é£æ ¼æŒ‡å—</a>å’Œ @llogiq çš„æ–‡ç«  Rustic Bits ä»¥åŠ <a href="https://github.com/Manishearth/rust-clippy">clippy</a> çš„ wrong_self_convention æ£€æµ‹é¡¹ä¸­æåˆ°äº†ã€‚è¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ–¹æ³•åç§°</th><th>å‚æ•°</th><th>å¤‡æ³¨</th><th>ä¸¾ä¾‹</th></tr></thead><tbody>
<tr><td>new</td><td>æ—  selfï¼Œé€šå¸¸ &gt;= 1 <sup class="footnote-reference"><a href="#1">1</a></sup></td><td>æ„é€ å™¨ï¼Œå¦å‚è§ Default</td><td>Box::newã€std::net::Ipv4Addr::new</td></tr>
<tr><td>with_...</td><td>æ—  selfï¼Œ&gt;= 1</td><td>å…¶ä»–æ„é€ å™¨</td><td>Vec::with_capacityã€regex::Regex::with_size_limit</td></tr>
<tr><td>from_...</td><td>1</td><td>å‚è§è½¬æ¢ traitï¼ˆconversion traitsï¼‰</td><td>String::from_utf8_lossy</td></tr>
<tr><td>as_...</td><td>&amp;self</td><td>æ— å¼€é”€çš„è½¬æ¢ï¼Œè¿”å›æ•°æ®çš„ä¸€ä¸ªè§†å›¾ï¼ˆviewï¼‰</td><td>str::as_bytesã€uuid::Uuid::as_bytes</td></tr>
<tr><td>to_...</td><td>&amp;self</td><td>æ˜‚è´µçš„è½¬æ¢</td><td>str::to_stringã€std::path::Path::to_str</td></tr>
<tr><td>into_...</td><td>selfï¼ˆæ¶ˆè€—ï¼‰</td><td>å¯èƒ½æ˜‚è´µçš„è½¬æ¢ï¼Œå‚è§ è½¬æ¢ traitï¼ˆconversion traitsï¼‰</td><td>std::fs::File::into_raw_fd</td></tr>
<tr><td>is_...</td><td>&amp;selfï¼ˆæˆ–æ— ï¼‰</td><td>æœŸæœ›è¿”å› bool</td><td>slice::is_emptyã€Result::is_okã€std::path::Path::is_file</td></tr>
<tr><td>has_...</td><td>&amp;self ï¼ˆæˆ–æ— ï¼‰</td><td>æœŸæœ›è¿”å› bool</td><td>regex_syntax::Expr::has_bytes</td></tr>
</tbody></table>
</div>
<h2 id="æ–‡æ¡£æµ‹è¯•"><a class="header" href="#æ–‡æ¡£æµ‹è¯•">æ–‡æ¡£æµ‹è¯•</a></h2>
<p>ç¼–å†™å¸¦æœ‰ç¤ºä¾‹ä»£ç çš„æ–‡æ¡£å¯ä»¥å±•ç¤º API çš„ç”¨æ³•è€Œä¸”è¿˜èƒ½è·å¾—è‡ªåŠ¨æµ‹è¯•
è¯¦è§ç¬¬ä¸€ç‰ˆ TRPLï¼ˆThe Rust Programming Languageï¼‰çš„[æ–‡æ¡£](è¯¦è§ç¬¬ä¸€ç‰ˆ TRPLï¼ˆThe Rust Programming Languageï¼‰çš„æ–‡æ¡£ä¸€èŠ‚ã€‚)ä¸€èŠ‚ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ä½¿ç”¨é­”æ³•æ“ä½œæ•°å­—
///
/// # ç¤ºä¾‹
///
/// ```rust
/// assert_eq!(min( 0,   14),    0);
/// assert_eq!(min( 0, -127), -127);
/// assert_eq!(min(42,  666),   42);
/// ```(ç”±äº hexo markdown æ¸²æŸ“è¾£é¸¡ï¼Œæ­¤å¤„åŠ ç‚¹æ–‡å­—é¿å…è¢«æ¸²æŸ“ä¸ºå•ç‹¬ä»£ç å—ï¼‰
fn min(lhs: i32, rhs: i32) -&gt; i32 {
	if lhs &lt; rhs { lhs } else { rhs }
}

<span class="boring">}</span></code></pre></pre>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ #![deny(missing_docs)] æ¥å¼ºåˆ¶ä¿è¯æ¯ä¸ªå…¬å¼€ API éƒ½æœ‰æ–‡æ¡£ã€‚ä½ å¯èƒ½ä¹Ÿä¼šå¯¹æˆ‘çš„è¿™ç¯‡æå‡ºäº† <a href="https://deterministic.space/machine-readable-inline-markdown-code-cocumentation.html">Rust æ–‡æ¡£æ ¼å¼åŒ–çº¦å®š</a>çš„æ–‡ç« æ„Ÿå…´è¶£ã€‚</p>
<h2 id="ä¸è¦åœ¨-api-ä¸­ä½¿ç”¨-å­—ç¬¦ä¸²ç±»å‹"><a class="header" href="#ä¸è¦åœ¨-api-ä¸­ä½¿ç”¨-å­—ç¬¦ä¸²ç±»å‹">ä¸è¦åœ¨ API ä¸­ä½¿ç”¨ â€œå­—ç¬¦ä¸²ç±»å‹â€</a></h2>
<blockquote>
<p>å°½é‡ä½¿ç”¨æšä¸¾</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust">enum Color { Red, Green, Blue, LightGoldenRodYellow }

fn color_me(input: &amp;str, color: Color) { /* ... */ }

fn main() {
    color_me(&quot;surprised&quot;, Color::Blue);
}</code></pre></pre>
<h2 id="å…¨æ˜¯å¸¸é‡çš„æ¨¡å—"><a class="header" href="#å…¨æ˜¯å¸¸é‡çš„æ¨¡å—">å…¨æ˜¯å¸¸é‡çš„æ¨¡å—</a></h2>
<p>æˆ–è€…ï¼Œå¦‚æœä½ æƒ³è¡¨è¾¾æ›´å¤æ‚çš„å€¼çš„è¯ï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–°çš„ structï¼Œç„¶åå®šä¹‰ä¸€å †å…¬å…±å¸¸é‡ã€‚ç„¶åæŠŠè¿™äº›å¸¸é‡æ”¾åˆ°æ¨¡å—ä¸­ï¼Œç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨ä¸ enum ç±»ä¼¼çš„è¯­æ³•æ¥è®¿é—®å®ƒä»¬äº†ã€‚</p>
<pre><pre class="playground"><code class="language-rust">pub mod output_options {
    pub struct OutputOptions { /* ... */ }
    
    impl OutputOptions { fn new(/* ... */) -&gt; OutputOptions { /* ... */ } }
    
    pub const DEFAULT: OutputOptions = OutputOptions { /* ... */ };
    pub const SLIM: OutputOptions = OutputOptions { /* ... */ };
    pub const PRETTY: OutputOptions = OutputOptions { /* ... */ };
}

fn output(f: &amp;Foo, opts: OutputOptions) { /* ... */ }

fn main() {
    let foo = Foo::new();
    
    output(foo, output_options::PRETTY);
}</code></pre></pre>
<h2 id="ä½¿ç”¨-fromstr-æ¥è§£æå­—ç¬¦ä¸²"><a class="header" href="#ä½¿ç”¨-fromstr-æ¥è§£æå­—ç¬¦ä¸²">ä½¿ç”¨ FromStr æ¥è§£æå­—ç¬¦ä¸²</a></h2>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ çš„ç”¨æˆ·ç¡®å®ä¸å¾—ä¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šä»ç¯å¢ƒå˜é‡ä¸­è¯»å–æˆ–è€…è¯»å–ä»–ä»¬çš„ç”¨æˆ·çš„è¾“å…¥ä½œä¸ºå‚æ•°â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬æ²¡åŠæ³•åœ¨ä»£ç ä¸­ç¼–å†™ï¼ˆé™æ€ï¼‰å­—ç¬¦ä¸²ä¼ é€’ç»™ä½ çš„ APIï¼ˆè¿™ä¸ªä¹Ÿæ˜¯æˆ‘ä»¬å°è¯•é˜»æ­¢çš„ï¼‰ã€‚è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦ä½¿ç”¨ FromStr triat äº†ï¼Œå®ƒæŠ½è±¡äº† â€œè§£æå­—ç¬¦ä¸²åˆ° Rust æ•°æ®ç±»å‹â€ çš„è¡Œä¸ºã€‚</p>
<pre><pre class="playground"><code class="language-rust">// é€‰æ‹© A: ä½ æ¥è§£æ
fn output_a(f: &amp;Foo, color: &amp;str) -&gt; Result&lt;Bar, ParseError&gt; {
    // è¿™é‡Œä½¿ç”¨è§£æåçš„ç±»å‹é®è”½æ‰äº†åŸæ¥çš„ `color`
    let color: Color = try!(color.parse());

    f.to_bar(&amp;color)
}

// é€‰æ‹© B: ç”¨æˆ·æ¥è§£æ
fn output_b(f: &amp;Foo, color: &amp;Color) -&gt; Bar {
    f.to_bar(color)
}

fn main() {
    let foo = Foo::new();

    // é€‰æ‹© A: ä½ æ¥è§£æï¼Œç”¨æˆ·æ¥å¤„ç† API é”™è¯¯
    output_a(foo, &quot;Green&quot;).expect(&quot;Error :(&quot;);

    // é€‰æ‹© B: ç”¨æˆ·ä¼ å…¥æœ‰æ•ˆç±»å‹ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤„ç†é”™è¯¯
    output_b(foo, Color::Green);

    // é€‰æ‹© B: ç”¨æˆ·ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œéœ€è¦è‡ªå·±è§£æå¹¶å¤„ç†é”™è¯¯
    output_b(foo, &quot;Green&quot;.parse().except(&quot;Parse error!&quot;));
}</code></pre></pre>
<h2 id="é”™è¯¯å¤„ç†"><a class="header" href="#é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</a></h2>
<p>TRPL ä¸­å¯¹äºé”™è¯¯å¤„ç†<a href="https://kaisery.gitbooks.io/rust-book-chinese/content/content/Error%20Handling%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html">æœ‰ä¸€ç« </a>å†™å¾—å¾ˆä¸é”™ã€‚</p>
<p>ä¹Ÿæœ‰ä¸€äº› crate å¯ä»¥ç”¨æ¥å‡å°‘ç¼–å†™è‰¯å¥½é”™è¯¯ç±»å‹æ‰€éœ€çš„æ ·æ¿ä»£ç ï¼Œæ¯”å¦‚ <a href="https://crates.io/crates/quick-error">quick-error</a> å’Œ <a href="https://crates.io/crates/error-chain">error-chain</a>ã€‚</p>
<h2 id="å…¬å…±ç±»å‹åˆ«å"><a class="header" href="#å…¬å…±ç±»å‹åˆ«å">å…¬å…±ç±»å‹åˆ«å</a></h2>
<p>å¦‚æœä½ çš„å†…éƒ¨ä»£ç å¸¸å¸¸ä½¿ç”¨æŸä¸ªå‚æ•°ç›¸åŒçš„æ³›å‹ç±»å‹ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åã€‚å¦‚æœä½ æƒ³æŠŠè¿™äº›ç±»å‹å…¬å¼€ç»™ä½ çš„ç”¨æˆ·ï¼Œä½ ä¹Ÿåº”è¯¥æŠŠè¿™äº›åˆ«ååŒæ ·å…¬å¼€ç»™ç”¨æˆ·ï¼ˆå½“ç„¶è®°å¾—æ–‡æ¡£ï¼‰ã€‚</p>
<p>ä¸€ä¸ªå¸¸è§æƒ…å†µæ˜¯ E ä¸ºå›ºå®šå€¼çš„ <code>Result&lt;T, E&gt;</code> ç±»å‹ã€‚æ¯”å¦‚ <code>std::io::Result&lt;T&gt; æ˜¯ Result&lt;T, std::io::Error&gt;</code> çš„åˆ«åï¼Œ<code>std::fmt::Result æ˜¯ Result&lt;(), std::fmt::Error&gt; </code>çš„åˆ«åï¼Œ<code>serde_json::error::Result&lt;T&gt; æ˜¯ Result&lt;T, serde_json::error::Error&gt;</code> çš„åˆ«åã€‚</p>
<h2 id="ä½¿ç”¨è½¬æ¢-trait"><a class="header" href="#ä½¿ç”¨è½¬æ¢-trait">ä½¿ç”¨è½¬æ¢ trait</a></h2>
<p>ä¸€ä¸ªè‰¯å¥½å®è·µæ˜¯æ°¸è¿œä¹Ÿä¸è¦åœ¨å‚æ•°ä¸­ä½¿ç”¨ &amp;String å’Œ &amp;Vec<T>ï¼Œå–è€Œä»£ä¹‹ä½¿ç”¨ &amp;str å’Œ &amp;[T]ï¼Œåè€…å…è®¸ä¼ å…¥æ›´å¤šç±»å‹ã€‚ï¼ˆåŸºæœ¬ä¸Šæ˜¯æ‰€æœ‰èƒ½ deref åˆ°å­—ç¬¦ä¸²æˆ–åˆ‡ç‰‡ï¼ˆsliceï¼‰çš„ç±»å‹ï¼‰</p>
<p>ä¸å…¶ä½¿ç”¨å…·ä½“ç±»å‹ä½œä¸ºå‚æ•°ï¼Œä¸å¦‚ä½¿ç”¨æ‹¥æœ‰ä¸¥æ ¼çº¦æŸçš„æ³›å‹ã€‚è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯æ–‡æ¡£çš„å¯è¯»æ€§ä¼šé™ä½ï¼Œå› ä¸ºå®ƒå……æ»¡äº†å¤§é‡å¤æ‚çš„æ³›å‹çº¦æŸï¼</p>
<p>std::convert ä¸ºæä¾›äº†ä¸€äº›æ–¹ä¾¿çš„å·¥å…·ï¼š</p>
<ul>
<li>AsMutï¼šä¸€ä¸ªä¾¿å®œçš„ï¼ˆä½æ¶ˆè€—ï¼‰ã€å¯å˜å¼•ç”¨åˆ°å¯å˜å¼•ç”¨çš„è½¬æ¢ã€‚</li>
<li>AsRefï¼šä¸€ä¸ªä¾¿å®œçš„ï¼Œå¼•ç”¨åˆ°å¼•ç”¨çš„è½¬æ¢ã€‚</li>
<li>Fromï¼š é€šè¿‡è½¬æ¢æ¥æ„é€ è‡ªèº«</li>
<li>Intoï¼šä¸€ä¸ªæ¶ˆè€—ä¼šè‡ªèº«çš„è½¬æ¢ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒæ˜‚è´µï¼ˆé«˜å¼€é”€ï¼‰ã€‚</li>
<li>TryFromï¼šå°è¯•é€šè¿‡è½¬æ¢æ¥æ„é€ è‡ªèº«</li>
<li>TryIntoï¼šå°è¯•æ¶ˆè€—è‡ªèº«è½¬çš„æ¢ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒæ˜‚è´µã€‚</li>
</ul>
<p>ä½ å¯èƒ½ä¹Ÿä¼šå–œæ¬¢è¿™ç¯‡å…³äº<a href="https://ricardomartins.cc/2016/08/03/convenient_and_idiomatic_conversions_in_rust">å¦‚ä½•åœ¨ Rust ä¸­è¿›è¡Œæ–¹ä¾¿åœ°é“çš„è½¬æ¢çš„æ–‡ç« </a>.</p>
<h2 id="cow"><a class="header" href="#cow">Cow</a></h2>
<p>å¦‚æœä½ éœ€è¦å¤„ç†å¾ˆå¤šä¸ç¡®å®šæ˜¯å¦éœ€è¦è¿›è¡Œåˆ†é…ï¼ˆallocateï¼‰çš„ä¸œè¥¿ï¼Œä½ åº”è¯¥ä½¿ç”¨Cow&lt;'a, B&gt;ï¼Œå®ƒå¯ä»¥è®©ä½ æŠ½è±¡å€Ÿç”¨å’Œæ‹¥æœ‰æ‰€æœ‰æƒçš„æ•°æ®ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>fn foo(p: PathBuf)</th><th>fn foo&lt;P: Into<PathBuf>&gt;(p: P)</th></tr></thead><tbody>
<tr><td>ç”¨æˆ·éœ€è¦æŠŠæ•°æ®è½¬ä¸º PathBuf</td><td>ç”±åº“æ¥è°ƒç”¨ .into() è¿›è¡Œè½¬æ¢</td></tr>
<tr><td>ç”¨æˆ·è¿›è¡Œåˆ†é…</td><td>çœ‹ä¸å‡ºï¼šåº“å¯èƒ½è¿›è¡Œåˆ†é…</td></tr>
<tr><td>ç”¨æˆ·éœ€è¦å…³å¿ƒ PathBuf æ˜¯ä»€ä¹ˆã€å¦‚ä½•åˆ›å»º</td><td>ç”¨æˆ·å¯ä»¥ä¼ é€’ String ã€OsStringï¼Œæˆ–è€… PathBuf éƒ½è¡Œ</td></tr>
</tbody></table>
</div>
<h2 id="intooption_"><a class="header" href="#intooption_">Into&lt;Option&lt;_&gt;&gt;</a></h2>
<p><a href="https://github.com/rust-lang/rust/pull/34828">è¿™ä¸ª PR</a> æ·»åŠ äº†ä¸€ä¸ª <code>impl&lt;T&gt; From&lt;T&gt; for Option&lt;T&gt;</code>ï¼Œåœ¨ Rust 1.12 ä¸­æ­£å¼å®è£…ã€‚å¯¥å¯¥å‡ è¡Œä»£ç èµ‹äºˆäº†ä½ ç¼–å†™å¯ä»¥è¢«ç›´æ¥è°ƒç”¨è€Œä¸éœ€è¦å†™ä¸€å¤§å † Some(...) çš„ API çš„èƒ½åŠ›ã€‚</p>
<p><strong>ä¹‹å‰</strong></p>
<pre><pre class="playground"><code class="language-rust">// å¯¹äº API ä½œè€…æ¥è¯´å¾ˆå®¹æ˜“ç¼–å†™ï¼Œæ–‡æ¡£ä¹Ÿå¾ˆæ˜“äºé˜…è¯»
fn foo(lorem: &amp;str, ipsum: Option&lt;i32&gt;, dolor: Option&lt;i32&gt;, sit: Option&lt;i32&gt;) {
    println!(&quot;{}&quot;, lorem);
}

fn main() {
    foo(&quot;bar&quot;, None, None, None);               // çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ª
    foo(&quot;bar&quot;, Some(42), None, None);           // è¿˜å¥½
    foo(&quot;bar&quot;, Some(42), Some(1337), Some(-1)); // åœï¼å¤ªå¤šâ€¦â€¦ Some äº†â€¦â€¦
}</code></pre></pre>
<p><strong>ç°åœ¨</strong></p>
<pre><pre class="playground"><code class="language-rust">// å¯¹äº API ä½œè€…æ¥è¯´å¾—å¤šæ‰“ç‚¹å­—
// ï¼ˆè€Œä¸”é—æ†¾çš„æ˜¯ï¼Œæ¯ä¸ªå‚æ•°éƒ½éœ€è¦è¢«å•ç‹¬æŒ‡å®šâ€”â€”å¦åˆ™ Rust åªä¼šæ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°æ¨æ–­ç±»å‹ã€‚
// è¿™ç§å†™æ³•é˜…è¯»æ¥ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ–‡æ¡£å¯èƒ½ä¹Ÿæ²¡é‚£ä¹ˆå¥½çœ‹ï¼‰
fn foo&lt;I, D, S&gt;(lorem: &amp;str, ipsum: I, dolor: D, sit: S) where
    I: Into&lt;Option&lt;i32&gt;&gt;,
    D: Into&lt;Option&lt;i32&gt;&gt;,
    S: Into&lt;Option&lt;i32&gt;&gt;,
{
    println!(&quot;{}&quot;, lorem);
}

fn main() {
    foo(&quot;bar&quot;, None, None, None); // ä»ç„¶å¥‡æ€ª
    foo(&quot;bar&quot;, 42, None, None);   // ä¸é”™
    foo(&quot;bar&quot;, 42, 1337, -1);     // Wowï¼Œæ£’æ£’ï¼è¯·åŠ¡å¿…è¿™æ ·ç¼–å†™ APIï¼
}</code></pre></pre>
<h2 id="å…³äºå¯èƒ½è¾ƒé•¿çš„ç¼–è¯‘æ—¶é—´çš„è¯´æ˜"><a class="header" href="#å…³äºå¯èƒ½è¾ƒé•¿çš„ç¼–è¯‘æ—¶é—´çš„è¯´æ˜">å…³äºå¯èƒ½è¾ƒé•¿çš„ç¼–è¯‘æ—¶é—´çš„è¯´æ˜</a></h2>
<p>å¦‚æœä½ æœ‰ï¼š</p>
<ul>
<li>å¾ˆå¤šç±»å‹å‚æ•°ï¼ˆæ¯”å¦‚ç”¨äºè½¬æ¢ traitï¼‰</li>
<li>ç”¨åœ¨ä¸€ä¸ªå¾ˆå¤æ‚/å¤§å‹çš„å‡½æ•°ä¸Šé¢</li>
<li>è¿™ä¸ªå‡½æ•°ç”¨å¾—è¿˜å¾ˆå¤š</li>
</ul>
<p>ç„¶å rustc å°†ä¼šæ ¹æ®ä¸åŒå‚æ•°ç¼–è¯‘è¿™ä¸ªå‡½æ•°çš„å¤§é‡æ’åˆ—ç»„åˆï¼ˆæ³›å‹å‡½æ•°çš„å•æ€åŒ–ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´å¾ˆé•¿çš„ç¼–è¯‘æ—¶é—´ã€‚</p>
<p><a href="https://github.com/bluss">bluss</a> åœ¨ <a href="https://www.reddit.com/r/rust/comments/556c0g/optional_arguments_in_rust_112/d8839pu?context=1">Reddit</a> ä¸Šæåˆ°å¯ä»¥ä½¿ç”¨ â€œå»æ³›å‹â€ æŠ€æœ¯æ¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼šä½ çš„ï¼ˆå…¬å…±ï¼‰æ³›å‹å‡½æ•°åªç®€å•åœ°è°ƒç”¨å¦ä¸€ä¸ªï¼ˆç§æœ‰ï¼‰éæ³›å‹å‡½æ•°ï¼Œè¿™æ ·è¿™ä¸ªç§æœ‰å‡½æ•°å°±åªä¼šè¢«ç¼–è¯‘ä¸€æ¬¡ã€‚</p>
<p>bluss ç»™çš„ä¾‹å­æ˜¯ std::fs::OpenOptions::open çš„å®ç°ï¼ˆæ¥è‡ª Rust 1.12 çš„<a href="https://doc.rust-lang.org/1.12.0/src/std/up/src/libstd/fs.rs.html#599-604">æºç </a>ï¼‰å’Œ image crate çš„ <a href="https://github.com/PistonDevelopers/image/pull/518">è¿™ä¸ªPR</a>ï¼Œå®ƒå°† open å‡½æ•°ä¿®æ”¹æˆäº†è¿™ä¸ªæ ·å­ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn open&lt;P&gt;(path: P) -&gt; ImageResult&lt;DynamicImage&gt; where P: AsRef&lt;Path&gt; {
    // ç®€å•çš„åŒ…è£…å‡½æ•°ï¼Œåœ¨è°ƒç”¨ open_impl ä¹‹å‰å»æ‰æ³›å‹
    open_impl(path.as_ref())
}
<span class="boring">}</span></code></pre></pre>
<h2 id="æƒ°æ€§"><a class="header" href="#æƒ°æ€§">æƒ°æ€§</a></h2>
<p>å°½ç®¡ Rust ä¸èƒ½åƒ Haskell ä¸€æ ·å¯¹è¡¨è¾¾å¼è¿›è¡Œæƒ°æ€§è®¡ç®—ï¼Œä½†æ˜¯ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ä¸€äº›æŠ€æœ¯æ¥ä¼˜é›…åœ°çœç•¥ä¸å¿…è¦çš„è®¡ç®—å’Œåˆ†é…ã€‚</p>
<h3 id="ä½¿ç”¨è¿­ä»£å™¨iterator"><a class="header" href="#ä½¿ç”¨è¿­ä»£å™¨iterator">ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰</a></h3>
<p>æ ‡å‡†åº“ä¸­æœ€ç»å¦™çš„æ„é€ ä¹‹ä¸€æ˜¯ Iteratorï¼Œå®ƒæ˜¯ä¸€ä¸ª traitï¼Œå…è®¸ç±»ä¼¼ç”Ÿæˆå™¨çš„å€¼è¿­ä»£ï¼Œè€Œä½ åªéœ€è¦ä¸ºæ­¤å®ç°ä¸€ä¸ª next æ–¹æ³•<sup class="footnote-reference"><a href="#3">2</a></sup>ã€‚Rust çš„è¿­ä»£å™¨æ˜¯æƒ°æ€§çš„ï¼Œä½ éœ€è¦æ˜¾å¼åœ°è°ƒç”¨ä¸€ä¸ªæ¶ˆè´¹å‡½æ•°æ‰ä¼šå¼€å§‹è¿­ä»£ã€‚åªæ˜¯ç¼–å†™ &quot;hello&quot;.chars().filter(char::is_white_space) ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œä»»ä½•æ“ä½œï¼Œç›´åˆ°ä½ å¯¹å®ƒè°ƒç”¨åƒ .collect::<String>() è¿™æ ·çš„æ–¹æ³•ã€‚</p>
<h3 id="è¿­ä»£å™¨ä½œä¸ºå‚æ•°"><a class="header" href="#è¿­ä»£å™¨ä½œä¸ºå‚æ•°">è¿­ä»£å™¨ä½œä¸ºå‚æ•°</a></h3>
<p>ä½¿ç”¨è¿­ä»£å™¨ä½œä¸ºè¾“å…¥å¯èƒ½ä¼šè®©ä½ çš„ API æ›´åŠ éš¾ä»¥é˜…è¯»ï¼ˆT: Iterator&lt;Item=Thingy&gt; vs &amp;[Thingy]ï¼‰ï¼Œä½†æ˜¯å¯ä»¥è®©ç”¨æˆ·é¿å…å†…å­˜åˆ†é…ã€‚</p>
<p>ä¸è¿‡ï¼Œäº‹å®ä¸Šï¼Œä½ å¯èƒ½ä¹Ÿå¹¶ä¸æƒ³æ¥å—ä¸€ä¸ªå®½æ³›çš„ Iteratorï¼šè€Œæ˜¯ä½¿ç”¨ IntoIterator ã€‚è¿™æ ·ä½ å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªé€šè¿‡è°ƒç”¨ .into_iter() å°±èƒ½è½»æ¾è½¬æ¢ä¸ºè¿­ä»£å™¨çš„ç±»å‹ã€‚åˆ¤æ–­å“ªäº›ç±»å‹å®ç°äº† IntoIterator ä¹Ÿå¾ˆç®€å•â€”â€”å°±å¦‚æ–‡æ¡£ä¸­æ‰€è¯´çš„ï¼š</p>
<h3 id="ç±»ä¼¼-iterator-çš„-trait"><a class="header" href="#ç±»ä¼¼-iterator-çš„-trait">ç±»ä¼¼ Iterator çš„ trait</a></h3>
<p>futures::Streamï¼šå¦‚ futures æ•™ç¨‹æ‰€è¯´ï¼Œç±»ä¼¼ Iterator::next è¿”å› Option<a href="Self::Item">Self::Item</a>ï¼ŒStream::poll è¿”å›ä¸€ä¸ª Option<a href="Self::Item">Self::Item</a> çš„å¼‚æ­¥ç»“æœï¼ˆæˆ–è€…è¿”å›ä¸€ä¸ªé”™è¯¯ï¼‰ã€‚</p>
<h3 id="æ¥å—é—­åŒ…"><a class="header" href="#æ¥å—é—­åŒ…">æ¥å—é—­åŒ…</a></h3>
<p>å¦‚æœæœ‰ä¸€ä¸ªå¯èƒ½æ¯”è¾ƒæ˜‚è´µçš„å€¼ï¼ˆæš‚ç§°ä¸ºç±»å‹ Valueï¼‰ï¼Œè€Œä¸”å®ƒå¹¶ä¸ä¼šåœ¨æ‰€æœ‰çš„åˆ†æ”¯ä¸­éƒ½è¢«ä½¿ç”¨åˆ°ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªè¿”å›è¿™ä¸ªå€¼çš„é—­åŒ…ï¼ˆFn() -&gt; Valueï¼‰ã€‚</p>
<p>ä¸€ä¸ªå®é™…ä¾‹å­æ˜¯ Result ä¸­çš„ unwrap_or å’Œ unwrap_or_elseï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let res: Result&lt;i32, &amp;str&gt; = Err(&quot;oh noes&quot;);
res.unwrap_or(42); // ç«‹å³è¿”å› `42`

let res: Result&lt;i32, &amp;str&gt; = Err(&quot;oh noes&quot;);
res.unwrap_or_else(|msg| msg.len() as i32); // å°†ä¼šåœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨é—­åŒ…è®¡ç®—
<span class="boring">}</span></code></pre></pre>
<h4 id="å…³äºæƒ°æ€§çš„å°æŠ€å·§"><a class="header" href="#å…³äºæƒ°æ€§çš„å°æŠ€å·§">å…³äºæƒ°æ€§çš„å°æŠ€å·§</a></h4>
<p>è®© Deref å®Œæˆæ‰€æœ‰çš„å·¥ä½œï¼šä¸ºä½ çš„ç±»å‹å®ç° Derefï¼Œè®©å®ƒæ¥å®Œæˆå®é™…çš„è®¡ç®—é€»è¾‘ã€‚è¿™ä¸ª<a href="https://crates.io/crates/lazy">crate lazy</a>å®ç°äº†ä¸€ä¸ªèƒ½ä¸ºä½ å®Œæˆè¿™ä»¶äº‹æƒ…çš„å®ï¼ˆä¸è¿‡éœ€è¦ unstable ç‰¹æ€§ï¼‰ã€‚</p>
<h2 id="æå‡æ˜“ç”¨æ€§çš„-trait"><a class="header" href="#æå‡æ˜“ç”¨æ€§çš„-trait">æå‡æ˜“ç”¨æ€§çš„ trait</a></h2>
<p>è¿™é‡Œåˆ—ä¸¾äº†ä¸€äº›ä½ åº”è¯¥è¯•ç€ä¸ºä½ çš„ç±»å‹å®ç°çš„ traitï¼Œå®ƒä»¬å¯ä»¥è®©ä½ çš„ç±»å‹æ›´åŠ æ˜“ç”¨ï¼š</p>
<ul>
<li>å®ç°æˆ–è€…æ´¾ç”Ÿï¼ˆderiveï¼‰â€œå¸¸ç”¨â€ çš„ trait æ¯”å¦‚ Debugã€Hashã€PartialEqã€PartialOrdã€Eqã€Ord</li>
<li>å®ç°æˆ–è€…æ´¾ç”ŸDefaultï¼Œè€Œä¸æ˜¯ç¼–å†™ä¸€ä¸ªä¸æ¥å—ä»»ä½•å‚æ•°çš„ new æ–¹æ³•ã€‚</li>
<li>å¦‚æœä½ æ­£åœ¨ä¸ºä¸€ä¸ªç±»å‹å®ç°ä¸€ä¸ªå¯ä»¥å°†å®ƒçš„æ•°æ®ä½œä¸º Iterator è¿”å›çš„æ–¹æ³•ï¼Œä½ ä¹Ÿåº”è¯¥è€ƒè™‘ä¸ºè¿™ä¸ªç±»å‹å®ç°IntoIteratorã€‚ï¼ˆä»…æœ‰ä¸€ç§è¿­ä»£æ•°æ®çš„ä¸»è¦æ–¹å¼æ—¶ï¼Œæ‰å»ºè®®è¿™ä¹ˆåšã€‚ å¦è¯·å‚è§ä¸Šé¢æœ‰å…³è¿­ä»£å™¨çš„éƒ¨åˆ†ã€‚ï¼‰</li>
<li>å¦‚æœä½ çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹å’Œ std ä¸­çš„åŸºæœ¬ç±»å‹ T å¾ˆç›¸ä¼¼ï¼Œè¯·è€ƒè™‘ä¸ºå®ƒå®ç° Deref&lt;Target=T&gt;ï¼Œä¸è¿‡è¯·ä¸è¦æ»¥ç”¨â€”â€”Deref ä¸æ˜¯ç”¨æ¥æ¨¡æ‹Ÿç»§æ‰¿çš„ï¼</li>
<li>ä¸è¦ç¼–å†™ä¸€ä¸ªæ¥å—å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ç„¶åè¿”å›ä¸€ä¸ªå®ä¾‹çš„æ„é€ æ–¹æ³•ï¼Œè¯·ä½¿ç”¨FromStr</li>
</ul>
<h2 id="ä¸ºè¾“å…¥å‚æ•°å®ç°è‡ªå®šä¹‰-trait"><a class="header" href="#ä¸ºè¾“å…¥å‚æ•°å®ç°è‡ªå®šä¹‰-trait">ä¸ºè¾“å…¥å‚æ•°å®ç°è‡ªå®šä¹‰ trait</a></h2>
<p>ä¾‹ï¼šstr::find
<code>str::find&lt;P: Pattern&gt;(p: P) </code>æ¥å—ä¸€ä¸ªPatternä½œä¸ºè¾“å…¥ï¼Œ<code>charã€strã€FnMut(char) -&gt; bool </code>ç­‰ç±»å‹éƒ½å®ç°äº†è¿™ä¸ª trait</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>&quot;Lorem ipsum&quot;.find('L');
&quot;Lorem ipsum&quot;.find(&quot;ipsum&quot;);
&quot;Lorem ipsum&quot;.find(char::is_whitespace);
<span class="boring">}</span></code></pre></pre>
<h2 id="æ‰©å±•-trait"><a class="header" href="#æ‰©å±•-trait">æ‰©å±• trait</a></h2>
<p>å°½é‡ä½¿ç”¨æ ‡å‡†åº“ä¸­å®šä¹‰çš„ç±»å‹å’Œ traitï¼Œå› ä¸ºå¤§éƒ¨åˆ† Rust ç¨‹åºå‘˜éƒ½äº†è§£å®ƒä»¬ï¼Œå®ƒä»¬ç»è¿‡äº†å……åˆ†çš„æµ‹è¯•å¹¶ä¸”æœ‰è‰¯å¥½çš„æ–‡æ¡£ã€‚ä¸è¿‡ï¼Œç”±äº Rust æ ‡å‡†åº“å€¾å‘äºæä¾›æœ‰è¯­ä¹‰å«ä¹‰çš„ç±»å‹<sup class="footnote-reference"><a href="#4">3</a></sup>ï¼Œè¿™äº›ç±»å‹åŒ…å«çš„æ–¹æ³•å¯èƒ½å¯¹ä½ çš„ API æ¥è¯´è¿˜ä¸å¤Ÿã€‚å¹¸è¿çš„æ˜¯ï¼ŒRust çš„ â€œå­¤å„¿è§„åˆ™ï¼ˆorphan rulesï¼‰â€ èµ‹äºˆäº†ä¸ºä»»ä½•ç±»å‹å®ç°ä»»ä½• trait çš„èƒ½åŠ›â€”â€”å‰ææ˜¯ç±»å‹å’Œ trait ä¸­çš„ä»»æ„ä¸€ä¸ªæ˜¯åœ¨å½“å‰ crate ä¸­å®šä¹‰çš„ã€‚</p>
<h2 id="è£…é¥°ç»“æœ"><a class="header" href="#è£…é¥°ç»“æœ">è£…é¥°ç»“æœ</a></h2>
<p>å¦‚ <a href="https://twitter.com/Argorak">Florian</a> åœ¨ <a href="http://yakshav.es/decorating-results/">â€œDecorating Resultsâ€</a> ä¸­å†™åˆ°çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥ç¼–å†™å¹¶å®ç° trait æ¥ä¸ºå†…ç½®ç±»å‹å¦‚ Result å®ç°è‡ªå·±çš„æ–¹æ³•ã€‚ä¸¾ä¾‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust">pub trait GrandResultExt {
    fn party(self) -&gt; Self;
}

impl GrandResultExt for Result&lt;String, Box&lt;Error&gt;&gt; {
    fn party(self) -&gt; Result&lt;String, Box&lt;Error&gt;&gt; {
        if self.is_ok() {
          println!(&quot;Wooohoo! ğŸ‰&quot;);
        }
        self
    }
}

// ç”¨æˆ·ä»£ç 
fn main() {
    let fortune = library_function()
        .method_returning_result()
        .party()
        .unwrap_or(&quot;Out of luck.&quot;.to_string());
}</code></pre></pre>
<p>Florian åœ¨ lazers çš„çœŸå®ä»£ç ä¸­ä½¿ç”¨äº†è¿™æ ·çš„æ¨¡å¼è£…é¥°äº† BoxFutureï¼ˆæ¥è‡ª futures crateï¼‰ä»¥è®©ä»£ç æ›´åŠ å¯è¯»ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let my_database = client
    .find_database(&quot;might_not_exist&quot;)
    .or_create();

<span class="boring">}</span></code></pre></pre>
<h2 id="æ‰©å±•-trait-1"><a class="header" href="#æ‰©å±•-trait-1">æ‰©å±• trait</a></h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡å®šä¹‰å¹¶å®ç°è‡ªå·±çš„ trait æ‰©å±•äº†ç±»å‹ä¸Šçš„å¯ç”¨æ–¹æ³•ã€‚ä½†ä½ è¿˜å¯ä»¥å®šä¹‰æ‰©å±•å…¶ä»– trait çš„ traitï¼ˆtrait MyTrait: BufRead + Debug {}ï¼‰ã€‚æœ€çªå‡ºçš„ä¾‹å­æ˜¯ <a href="https://crates.io/crates/itertools">itertools</a> crateï¼Œå®ƒä¸º std çš„è¿­ä»£å™¨æ·»åŠ äº†ä¸€å¤§å †æ–¹æ³•ã€‚</p>
<h2 id="å»ºé€ è€…æ¨¡å¼"><a class="header" href="#å»ºé€ è€…æ¨¡å¼">å»ºé€ è€…æ¨¡å¼</a></h2>
<p>é€šè¿‡å°†ä¸€å †å°æ–¹æ³•ä¸²è”åœ¨ä¸€èµ·ä½ å¯ä»¥è®©å¤æ‚çš„ API æ›´åŠ æ˜“äºè°ƒç”¨ã€‚è¿™ä¸ªå’Œ Session Type éå¸¸æ­ï¼ˆç¨åä¼šæåˆ°ï¼‰ã€‚derive_builder crate å¯ä»¥ç”¨æ¥ä¸ºè‡ªå®šä¹‰çš„ struct è‡ªåŠ¨ç”Ÿæˆï¼ˆç®€å•çš„ï¼‰Builder</p>
<p>ä¾‹ï¼š std::fs::OpenOptions</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::OpenOptions;
let file = OpenOptions::new().read(true).write(true).open(&quot;foo.txt&quot;);
<span class="boring">}</span></code></pre></pre>
<h3 id="session-type"><a class="header" href="#session-type">Session Type</a></h3>
<p>ä½ å¯ä»¥åœ¨ç±»å‹ç³»ç»Ÿä¸­ç¼–ç ä¸€ä¸ªçŠ¶æ€æœºã€‚</p>
<ul>
<li>æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ä¸åŒçš„ç±»å‹ã€‚</li>
<li>æ¯ä¸ªçŠ¶æ€ç±»å‹éƒ½å®ç°äº†ä¸åŒçš„æ–¹æ³•ã€‚</li>
<li>ä¸€äº›æ–¹æ³•ä¼šæ¶ˆè€—è¿™ä¸ªçŠ¶æ€ç±»å‹ï¼ˆè·å–æ‰€æœ‰æƒï¼‰å¹¶ä¸”è¿”å›å¦ä¸€ä¸ªçŠ¶æ€ç±»å‹ã€‚</li>
</ul>
<p>è¿™ä¸ªæŠ€å·§åœ¨ Rust ä¸­å·¥ä½œåœ°éå¸¸è‰¯å¥½ï¼Œå› ä¸ºä½ çš„æ–¹æ³•å¯ä»¥å°†æ•°æ®ç§»åŠ¨åˆ°æ–°çš„ç±»å‹ä¸­ï¼Œå¹¶ä¸”ä¿è¯åœ¨ä¹‹åä½ å°±æ— æ³•è®¿é—®æ—§çŠ¶æ€äº†ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå…³äºé‚®å¯„åŒ…è£¹çš„å°ä¾‹å­ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let p: OpenPackage = Package::new();
let p: OpenPackage = package.insert([stuff, padding, padding]);

let p: ClosedPackage = package.seal_up();

// let p: OpenPackage = package.insert([more_stuff]);
//~^ ERROR: No method named `insert` on `ClosedPackage`

let p: DeliveryTracking = package.send(address, postage);

<span class="boring">}</span></code></pre></pre>
<p>ä¸€ä¸ªå¾ˆå¥½çš„å®é™…ä¾‹å­æ˜¯ /u/ssokolow åœ¨ <a href="https://www.reddit.com/r/rust/comments/568yvh/typesafe_unions_in_c_and_rust/d8hcwfs">/r/rust çš„è¿™ä¸ªå¸–å­ </a>ä¸­ç»™å‡ºçš„ï¼š</p>
<p>Hyper ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥åœ¨ç¼–è¯‘æ—¶ä¿è¯ï¼Œä½ ä¸å¯èƒ½åšå‡ºè¯¸å¦‚ â€œåœ¨è¯·æ±‚/å“åº”ä¸»ä½“å·²ç»å¼€å§‹ååˆæ¥è®¾ç½® HTTP å¤´â€ è¿™ç§ç»å¸¸åœ¨ PHP ç½‘ç«™ä¸Šçœ‹åˆ°çš„äº‹ã€‚ï¼ˆç¼–è¯‘å™¨å¯ä»¥æ•è·è¿™ä¸ªé”™è¯¯ï¼Œå› ä¸ºåœ¨è¯¥çŠ¶æ€ä¸‹çš„è¿æ¥ä¸Šæ²¡æœ‰ â€œset headerâ€ æ–¹æ³•ï¼Œå¹¶ä¸”ç”±äºè¿‡æ—¶å¼•ç”¨ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥è¢«å¼•ç”¨çš„ä¸€å®šæ˜¯æ­£ç¡®çš„çŠ¶æ€ã€‚ï¼‰</p>
<p><a href="http://hyper.rs/hyper/v0.9.10/hyper/server/index.html#an-aside-write-status">hyper::server æ–‡æ¡£</a>ä¸­æ›´è¯¦ç»†åœ°è§£é‡Šäº†è¿™æ˜¯å¦‚ä½•å®ç°çš„ã€‚å¦ä¸€ä¸ªæœ‰è¶£çš„æƒ³æ³•å¯ä»¥åœ¨<a href="https://github.com/skade/lazers/blob/96efff493be9312ffc70eac5a04b441952e089eb/lazers-replicator/src/lib.md#verify-peers"> lazers-replicator crate</a> ä¸­æ‰¾åˆ°ï¼šå®ƒä½¿ç”¨ std::convert::Fromæ¥åœ¨çŠ¶æ€ä¸­è½¬æ¢ã€‚</p>
<h2 id="æ›´å¤šä¿¡æ¯"><a class="header" href="#æ›´å¤šä¿¡æ¯">æ›´å¤šä¿¡æ¯ï¼š</a></h2>
<ul>
<li>æ–‡ç«  â€œBeyond Memory Safety With Typesâ€ æè¿°äº†è¿™é¡¹æŠ€æœ¯å¦‚ä½•è¢«ç”¨æ¥å®ç°ä¸€ä¸ªæ¼‚äº®å¹¶ä¸”ç±»å‹å®‰å…¨çš„ IMAP åè®®ã€‚</li>
<li>è®ºæ–‡ â€œSession types for Rustâ€ (PDF)ï¼Œä½œè€… Thomas Bracht Laumann Jespersen, Philip Munksgaard, and Ken Friis Larsen (2015). DOI</li>
<li>Andrew Hobden çš„å¸–å­ <a href="https://hoverbear.org/2016/10/12/rust-state-machine-pattern/">â€œPretty State Machine Patterns in Rustâ€</a> å±•ç¤ºäº†ä¸€äº›åœ¨ Rust çš„ç±»å‹ç³»ç»Ÿä¸­å®ç°çŠ¶æ€æœºçš„æ–¹æ³•ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ"><a class="header" href="#ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ">ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ</a></h2>
<p>åœ¨é™æ€ç±»å‹è¯­è¨€ä¸­ï¼Œä¸ºä½ çš„ API æŒ‡å®šç±»å‹å’Œ trait çº¦æŸæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¦‚å‰æ–‡æ‰€è¯´çš„ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©é˜²æ­¢é€»è¾‘é”™è¯¯ã€‚æ­¤å¤–ï¼ŒRust çš„ç±»å‹ç³»ç»Ÿè¿˜æä¾›äº†å¦ä¸€ä¸ªç»´åº¦ï¼šä½ è¿˜å¯ä»¥æè¿°ä½ çš„æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå¹¶ç¼–å†™ç”Ÿå‘½å‘¨æœŸçº¦æŸï¼‰ã€‚</p>
<p>è¿™å¯ä»¥è®©ä½ ï¼ˆä½œä¸ºå¼€å‘è€…ï¼‰æ›´è½»æ¾åœ°å¯¹å¾…å€Ÿç”¨çš„æ•°æ®ï¼ˆè€Œä¸æ˜¯ä½¿ç”¨å¼€é”€æ›´å¤§çš„æ‹¥æœ‰æ‰€æœ‰æƒçš„æ•°æ®ï¼‰ã€‚å°½å¯èƒ½åœ°ä½¿ç”¨å¼•ç”¨åœ¨ Rust ä¸­æ˜¯ä¸€ä¸ªè‰¯å¥½å®è·µï¼Œå› ä¸ºé«˜æ€§èƒ½å’Œ â€œé›¶åˆ†é…â€ çš„åº“ä¹Ÿæ˜¯è¯­è¨€çš„å–ç‚¹ä¹‹ä¸€ã€‚</p>
<p>ä¸è¿‡ï¼Œä½ åº”è¯¥å°½å¯èƒ½ä¸ºæ­¤ç¼–å†™è‰¯å¥½çš„æ–‡æ¡£ï¼Œå› ä¸ºç†è§£ç”Ÿå‘½å‘¨æœŸå’Œå¤„ç†å¼•ç”¨å¯¹äºä½ çš„åº“ç”¨æˆ·æ¥è¯´å¯èƒ½æ˜¯ä¸ªæŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯å¯¹äº Rust æ–°æ‰‹æ¥è¯´ã€‚</p>
<p>ç”±äºæŸäº›åŸå› ï¼ˆå¯èƒ½æ˜¯æ¯”è¾ƒç®€çŸ­ï¼‰ï¼Œå¾ˆå¤šç”Ÿå‘½å‘¨æœŸéƒ½è¢«å‘½åä¸º 'aã€'bæˆ–ç±»ä¼¼çš„æ— æ„ä¹‰å­—ç¬¦ï¼Œä¸è¿‡å¦‚æœä½ äº†è§£å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”çš„èµ„æºçš„è¯ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ›´å¥½çš„åç§°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ å°†æ–‡ä»¶è¯»å…¥åˆ°å†…å­˜å¹¶ä¸”å¤„ç†å¯¹è¿™å—å†…å­˜çš„å¼•ç”¨ï¼Œå¯ä»¥å°†å®ƒçš„ç”Ÿå‘½å‘¨æœŸå‘½åä¸º 'fileï¼Œæˆ–è€…å¦‚æœä½ åœ¨å¤„ç†ä¸€ä¸ª TCP è¯·æ±‚å¹¶ä¸”è§£æå®ƒçš„æ•°æ®ï¼Œåˆ™å¯ä»¥å°†ç”Ÿå‘½å‘¨æœŸå‘½åä¸º 'reqã€‚</p>
<h2 id="å°†ææ„ä»£ç æ”¾åœ¨-drop-ä¸­"><a class="header" href="#å°†ææ„ä»£ç æ”¾åœ¨-drop-ä¸­">å°†ææ„ä»£ç æ”¾åœ¨ drop ä¸­</a></h2>
<p>Rust çš„æ‰€æœ‰æƒè§„åˆ™ä¸ä»…èƒ½ç”¨äºå†…å­˜ï¼šå¦‚æœä½ çš„æ•°æ®ç±»å‹è¡¨ç¤ºç€å¤–éƒ¨èµ„æºï¼ˆæ¯”å¦‚ TCP è¿æ¥ï¼‰ï¼Œåˆ™åœ¨è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Drop trait å…³é—­ã€é‡Šæ”¾æˆ–æ¸…ç†è¯¥èµ„æºã€‚ä½ å¯ä»¥åƒåœ¨å…¶ä»–è¯­è¨€ä¸­ä½¿ç”¨ææ„å‡½æ•°ï¼ˆæˆ–è€… try ... catch ... finallyï¼‰ä¸€æ ·ä½¿ç”¨å®ƒã€‚
å®é™…çš„ä¾‹å­æœ‰ï¼š</p>
<ul>
<li>å¼•ç”¨è®¡æ•°ç±»å‹ Rc å’Œ Arc ä½¿ç”¨ Drop æ¥å‡å°‘å¼•ç”¨è®¡æ•°ï¼ˆå¹¶ä¸”åœ¨è®¡æ•°å½’é›¶çš„æ—¶å€™é‡Šæ”¾æ‹¥æœ‰çš„æ•°æ®ï¼‰ã€‚</li>
<li>MutexGuard ä½¿ç”¨ Drop æ¥é‡Šæ”¾å®ƒå¯¹ Mutex çš„é”ã€‚</li>
<li>diesel crate ç”¨ Drop æ¥å…³é—­æ•°æ®åº“è¿æ¥ï¼ˆæ¯”å¦‚ SQLiteï¼‰ã€‚</li>
</ul>
<h2 id="æ¡ˆä¾‹å­¦ä¹ "><a class="header" href="#æ¡ˆä¾‹å­¦ä¹ ">æ¡ˆä¾‹å­¦ä¹ </a></h2>
<p>åœ¨ API è®¾è®¡ä¸­ä½¿ç”¨äº†ä¸€äº›ä¸é”™çš„æŠ€å·§çš„ Rust åº“ï¼š</p>
<ul>
<li>hyperï¼šSession Typeï¼ˆè§ä¸Šæ–‡ï¼‰</li>
<li>dieselï¼šä½¿ç”¨æ‹¥æœ‰å¤æ‚çš„å…³è”ç±»å‹çš„ trait å°† SQL æŸ¥è¯¢ç¼–ç ä¸ºç±»å‹</li>
<li>futuresï¼šé«˜åº¦æŠ½è±¡å¹¶ä¸”æ‹¥æœ‰è‰¯å¥½æ–‡æ¡£çš„ crate</li>
</ul>
<h2 id="å…¶ä»–è®¾è®¡æ¨¡å¼"><a class="header" href="#å…¶ä»–è®¾è®¡æ¨¡å¼">å…¶ä»–è®¾è®¡æ¨¡å¼</a></h2>
<p>æˆ‘åœ¨è¿™é‡Œä»‹ç»çš„æ˜¯ç¼–å†™æ¥å£çš„è®¾è®¡æ¨¡å¼ï¼Œå³é¢å‘ç”¨æˆ·çš„ APIã€‚è™½ç„¶æˆ‘è®¤ä¸ºå…¶ä¸­çš„ä¸€äº›æ¨¡å¼åªé€‚ç”¨äºç¼–å†™åº“ï¼Œä½†è®¸å¤šæ¨¡å¼ä¹ŸåŒæ ·é€‚ç”¨äºç¼–å†™é€šç”¨åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ <a href="https://github.com/rust-unofficial/patterns">Rust Design Patterns</a> ä»“åº“ä¸­æ‰¾åˆ°æ›´å¤šä¿¡æ¯</p>
<p>Update 2017-04-27ï¼šè¿™ç¯‡æ–‡ç« å‘å¸ƒä»¥æ¥ï¼ŒRust åº“å›¢é˜Ÿçš„ @brson å·²ç»å‘å¸ƒäº†ä¸€ä¸ªç›¸å½“å…¨é¢çš„ <a href="https://github.com/brson/rust-api-guidelines">Rust API Guidelines</a> æ–‡æ¡£ï¼Œå›Šæ‹¬äº†æˆ‘çš„æ‰€æœ‰å»ºè®®ï¼Œå¹¶ä¸”å†…å®¹æ›´å…¨é¢ã€‚</p>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">4</sup>
<p>åœ¨å…¶ä»–å¼ºç±»å‹è¯­è¨€ä¸­æœ‰ä¸€å¥å£å· â€œmaking illegal states unrepresentableâ€ã€‚æˆ‘ç¬¬ä¸€æ¬¡å¬è¯´è¿™ä¸ªæ˜¯åœ¨äººä»¬è°ˆè®º Haskell çš„æ—¶å€™ï¼Œè¿™ä¹Ÿæ˜¯ F# for fun and profit çš„<a href="http://fsharpforfunandprofit.com/posts/designing-with-types-making-illegal-states-unrepresentable/">è¿™ç¯‡æ–‡ç« </a>çš„æ ‡é¢˜ï¼Œå’Œ Richard Feldman åœ¨ elm-conf 2016 ä¸Šçš„è¿™ç¯‡æ¼”è®²ã€‚</p>
</div>
<p><a href="https://rustcc.cn/article?id=67cd8a70-8f32-4984-bdd5-4a8c6c969775">æœ¬æ–‡é“¾æ¥</a></p>
<script src="/note-service/rust/infisearch_assets/search-ui.chinese.bundle.js" type="text/javascript" charset="utf-8"></script>
<script src="/note-service/rust/infisearch_assets/mark.min.js" type="text/javascript" charset="utf-8"></script>
<script>
const base_url = '/note-service/rust/';
const mode = 'target';
infisearch.init({
  searcherOptions: {
    url: base_url + 'infisearch_output/',
  },
  uiOptions: {
    mode,
    dropdownAlignment: 'bottom-start',
    target: document.getElementById('infisearch-mdbook-target'),
    fsButtonPlaceholder: 'Search',
    sourceFilesUrl: base_url,
    resultsRenderOpts: {
      searchedTermsParam: 'search',
    },
    multiSelectFilters: [
      { fieldName: 'partTitle', displayName: 'Section', defaultOptName: 'None' },
    ],
  },
});

document.getElementById('infi-search').addEventListener('keydown', (ev) => {
  if (['ArrowLeft', 'ArrowRight'].includes(ev.key)) {
    ev.stopPropagation(); // used in global listener to change pages
    return;
  }
});

if (window.location.search) {
  // Adapted from the original searcher.js for mdbook
  // https://github.com/rust-lang/mdBook/blob/master/src/theme/searcher/searcher.js
  const target = document.getElementById('content');
  const marker = new Mark(target);

  function doSearchOrMarkFromUrl() {
    // Check current URL for search request
    var url = new URL(window.location.href);
    var urlParams = new URLSearchParams(url.search);

    if (urlParams.has('search')) {
      var words = JSON.parse(decodeURIComponent(urlParams.get('search')));
      marker.mark(words);

      var markers = document.querySelectorAll('mark');
      function hide() {
        for (var i = 0; i < markers.length; i++) {
          markers[i].classList.add('fade-out');
          window.setTimeout(function () { marker.unmark(); }, 300);
        }
      }
      for (var i = 0; i < markers.length; i++) {
        markers[i].addEventListener('click', hide);
      }
    }
  }
  doSearchOrMarkFromUrl();
}
</script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="16constç±»å‹ä¸å‡½æ•°.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="18rustæ‰§è¡Œshellå‘½ä»¤.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="16constç±»å‹ä¸å‡½æ•°.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="18rustæ‰§è¡Œshellå‘½ä»¤.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>



        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
